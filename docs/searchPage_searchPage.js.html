<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: searchPage/searchPage.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: searchPage/searchPage.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>console.log("searchPage.js loaded");
const fs = require("fs");
const path = require("path");
updateButtonColor();
// Event listener for DOMContentLoaded event
document.addEventListener("DOMContentLoaded", () => {
  const searchInput = document.getElementById("search-bar");
  const labelsContainer = document.getElementById("labels-container");
  const labelToDate = JSON.parse(
    fs.readFileSync(
      path.join(__dirname, "../../DevJournal", "/Data", "DatetoLabel.json"),
      "utf8"
    )
  );
  // Event listener for input event on search input
  searchInput.addEventListener("input", function () {
    const query = this.value;
    console.log(`Input event triggered with query: ${query}`);
    filterLabels(query, labelsContainer, searchInput);
    const datesContainer = document.getElementById("dates-container");
    // If the query matches a label, display the dates for that label
    if (labelToDate.hasOwnProperty(query)) {
      console.log(`Query matches a label in labelToDate: ${query}`);
      displayDates(query, labelToDate);
    } else {
      console.log(`Query does not match any label in labelToDate: ${query}`);
      datesContainer.innerHTML = "";
    }
  });

  updateButtonColor();
  filterLabels("", labelsContainer, searchInput);
});

/**
 * Display labels in the labels container.
 * @param {Array} labels - The labels to display.
 * @param {HTMLElement} labelsContainer - The container to display labels in.
 * @param {HTMLElement} searchInput - The search input element.
 */
function displayLabels(labels, labelsContainer, searchInput) {
  labelsContainer.innerHTML = "";
  labels.forEach((label) => {
    const labelElement = document.createElement("div");
    labelElement.textContent = label;
    labelElement.classList.add("label");

    // Event listener for click event on label element
    labelElement.addEventListener("click", function () {
      searchInput.value = label;
      labelsContainer.innerHTML = "";
      displayDates(
        label,
        JSON.parse(
          fs.readFileSync(
            path.join(
              __dirname,
              "../../DevJournal",
              "/Data",
              "DatetoLabel.json"
            ),
            "utf8"
          )
        )
      );
    });
    // Event listener for enter on label element
    labelElement.addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        searchInput.value = label;
        labelsContainer.innerHTML = "";
        displayDates(
          label,
          JSON.parse(
            fs.readFileSync(
              path.join(
                __dirname,
                "../../DevJournal",
                "/Data",
                "DatetoLabel.json"
              ),
              "utf8"
            )
          )
        );
      }
    });

    labelsContainer.appendChild(labelElement);
    labelElement.setAttribute("tabindex", "0"); // Add tabindex to make search bar labels keyboard accessible
  });
}
/**
 * Display dates as clickable buttons for a given label.
 * @param {string} label - The label to display dates for.
 * @param {Object} labelToDate - The label to date mapping.
 */
function displayDates(label, labelToDate) {
  const datesContainer = document.getElementById("dates-container");
  datesContainer.innerHTML = "";

  console.log(`Displaying dates for label: ${label}`);
  const searchButtonColor = getComputedStyle(
    document.getElementById("search-button")
  ).backgroundColor;

  if (labelToDate.hasOwnProperty(label)) {
    console.log(`Found label in labelToDate: ${label}`);
    labelToDate[label].forEach((dateObj) => {
      const dateStr = `${dateObj.month + 1}/${dateObj.day}/${dateObj.year}`;
      console.log(`Creating button for date: ${dateStr}`);
      const dateButton = document.createElement("button");
      dateButton.textContent = dateStr;
      dateButton.classList.add("date-button");
      dateButton.style.backgroundColor = searchButtonColor;

      // Event listener for click event on date button
      dateButton.addEventListener("click", function () {
        localStorage.setItem("date", JSON.stringify(dateObj));
        // Navigate to the Notes Page
        window.location.href = escape("../Notes/index.html");
      });

      datesContainer.appendChild(dateButton);
    });
  } else {
    console.log(`Label not found in labelToDate: ${label}`);
    const messageElement = document.createElement("div");
    messageElement.textContent = `Label not found in labelToDate: ${label}`;
    messageElement.classList.add("No such Label exists");
    datesContainer.appendChild(messageElement);
  }
}
/**
 * Filter labels based on a query and display them.
 * @param {string} query - The query to filter labels.
 * @param {HTMLElement} labelsContainer - The container to display labels in.
 * @param {HTMLElement} searchInput - The search input element.
 */
function filterLabels(query, labelsContainer, searchInput) {
  const constSuggestions = Object.keys(
    JSON.parse(
      fs.readFileSync(
        path.join(__dirname, "../../DevJournal", "/Data", "DatetoLabel.json"),
        "utf8"
      )
    )
  );
  const filteredLabels = constSuggestions.filter((suggestion) =>
    suggestion.toLowerCase().includes(query.toLowerCase())
  );
  displayLabels(filteredLabels, labelsContainer, searchInput, filterLabels);
}

/**
 * @function updateButtonColor
 *
 * Update the color of the search button based on the current month.
 */
function updateButtonColor() {
  const monthClasses = [
    "january",
    "february",
    "march",
    "april",
    "may",
    "june",
    "july",
    "august",
    "september",
    "october",
    "november",
    "december",
  ];

  const monthColors = {
    january: "#c14300",
    february: "#f29cac",
    march: "#28a745",
    april: "#e83e8c",
    may: "#790258",
    june: "#154a27",
    july: "#17a2b8",
    august: "#d1890c",
    september: "#dc3545",
    october: "#d45810",
    november: "#343a40",
    december: "#53697d",
  };

  const currentMonthClass = monthClasses[new Date().getMonth()];
  const searchButton = document.getElementById("search-button");
  searchButton.style.backgroundColor = monthColors[currentMonthClass];
  const backToCalendarButton = document.getElementById("backToCalendar");
  backToCalendarButton.style.backgroundColor = monthColors[currentMonthClass];
}
// Navigate back to calendar
document
  .getElementById("backToCalendar")
  .addEventListener("click", function () {
    window.location.href = escape("../calendar/index.html");
  });
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addTodoListItem">addTodoListItem</a></li><li><a href="global.html#alterCompletion">alterCompletion</a></li><li><a href="global.html#createCalendar">createCalendar</a></li><li><a href="global.html#daysInMonth">daysInMonth</a></li><li><a href="global.html#deleteDatetoLabel">deleteDatetoLabel</a></li><li><a href="global.html#deleteLabel">deleteLabel</a></li><li><a href="global.html#deleteMarkdownEntry">deleteMarkdownEntry</a></li><li><a href="global.html#deleteTodoListItem">deleteTodoListItem</a></li><li><a href="global.html#displayDates">displayDates</a></li><li><a href="global.html#displayLabels">displayLabels</a></li><li><a href="global.html#filterLabels">filterLabels</a></li><li><a href="global.html#fs">fs</a></li><li><a href="global.html#getContrastColor">getContrastColor</a></li><li><a href="global.html#getNotes">getNotes</a></li><li><a href="global.html#highlightCurrentDay">highlightCurrentDay</a></li><li><a href="global.html#isHoliday">isHoliday</a></li><li><a href="global.html#labelExists">labelExists</a></li><li><a href="global.html#openTab">openTab</a></li><li><a href="global.html#renderLabels">renderLabels</a></li><li><a href="global.html#renderMarkdownEntry">renderMarkdownEntry</a></li><li><a href="global.html#renderNotes">renderNotes</a></li><li><a href="global.html#saveDatetoLabel">saveDatetoLabel</a></li><li><a href="global.html#saveLabel">saveLabel</a></li><li><a href="global.html#saveMarkdownEntry">saveMarkdownEntry</a></li><li><a href="global.html#updateButtonColorUpdatethecolorofthesearchbuttonbasedonthecurrentmonth.">updateButtonColor

Update the color of the search button based on the current month.</a></li><li><a href="global.html#updateMonthYear">updateMonthYear</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
